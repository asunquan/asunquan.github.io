<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>关于 Swift 的一点初步看法</title>
  <meta name="description" content="">
  <meta name="author" content="Wei Wang">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="关于 Swift 的一点初步看法">
  <meta name="twitter:description" content="">
  
  <meta property="og:type" content="article">
  <meta property="og:title" content="关于 Swift 的一点初步看法">
  <meta property="og:description" content="">
  
  <link rel="icon" type="image/png" href="/assets/images/favicon.png" />
  <link href="/assets/images/favicon.png" rel="shortcut icon" type="image/png">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://onevcat.com/2014/06/my-opinion-about-swift/">
  <link rel="alternate" type="application/rss+xml" title="Asunquan" href="http://onevcat.com/feed.xml">
  
  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />
  
</head>


  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/assets/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/#blog" title="前往 Asunquan 的主页" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="Asunquan logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for Asunquan" class="blog-button">Asunquan</a></h1>

        
        <span class="panel-cover__subtitle panel-subtitle">不忘初心 不止于行</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">嗨，我是王巍 (@onevcat)，一名来自中国的 iOS / Unity 开发者。现居日本，就职于 LINE。正在修行，探求创意之源。</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        <p class="panel-cover__description"><a href="https://objccn.io/products/" target="_blank">ObjC 中国与 objc.io 合作最新作品《函数式 Swift》,《Core Data》及《Swift 进阶》已经发布</a>，<a href="https://boxueio.com">泊学网正在开展订阅赠书活动，也欢迎前往了解</a></p>
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="访问博客" class="blog-button">博客</a></li>
                
                  <li class="navigation__item"><a href="http://project.onevcat.com" target="_blank" title="我的项目">项目</a></li>
                
                  <li class="navigation__item"><a href="http://about.onevcat.com/" target="_blank" title="了解更多关于我">关于</a></li>
                
                  <li class="navigation__item"><a href="//store.objccn.io/subscribe" target="_blank" title="邮件订阅本站">订阅</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

  
  <!-- Weibo -->
  <li class="navigation__item">
    <a href="http://weibo.com/onevcat" title="@onevcat 的微博" target="_blank">
      <i class='social fa fa-weibo'></i>
      <span class="label">Weibo</span>
    </a>
  </li>
  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/onevcat" title="@onevcat 的 Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  
  
  
  <!-- Twitter -->
  <li class="navigation__item">
    <a href="http://twitter.com/onevcat" title="@onevcat" target="_blank">
      <i class='social fa fa-twitter'></i>
      <span class="label">Twitter</span>
    </a>
  </li>
  

  
  <!-- Google Plus -->
  <li class="navigation__item">
    <a href="https://plus.google.com/107108267983477358170" rel="author" title="Google+" target="_blank">
      <i class='social fa fa-google-plus-square'></i>
      <span class="label">Google Plus</span>
    </a>
  </li>
  

  <!-- RSS -->
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:onev@onevcat.com" title="Contact me">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-slate"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2014-06-03 11:05:44 +0800" itemprop="datePublished" class="post-meta__date date">2014-06-03</time> &#8226; <span class="post-meta__tags tags">能工巧匠集</span>
    </div>
    <h1 class="post-title">关于 Swift 的一点初步看法</h1>
  </header>

  <section class="post">
    <p><img src="/assets/images/2014/swift.png" alt=""></p>

<p>虽然四点半就起床去排队等入场，结果还是只能坐在了蛮后面的位置看着大屏幕参加了今年的 Keynote。其实今年 OS X 和 iOS 的更新亮点都不少，但是显然风头和光芒都让横空出世的 Swift 给抢走了。这部分内容因为不是 NDA，所以可以提前说一说。</p>

<p>Swift 是 Apple 自创的一门专门为 Cocoa 和 CocoaTouch 设计的语言，意在用来替代 objc。早上发布的时候有很多朋友说其实他们已经写了很久的 Swift，而且还给了一个<a href="http://swift-lang.org">网站</a>，在这里首先需要说明的是，这个网站的 <em>Swift parallel scripting language</em> 和 Apple 的 <a href="https://developer.apple.com/swift/">Swift</a> 并不是一个东西，两者可以说毫无关系。Apple 还在自己的 Swift 介绍页面后面很友好地放上了 Swift parallel scripting language 的网站链接，以提示那些真的想搜另一个 Swift 却被 SEO 误导过来的可怜的孩子。</p>

<p>我个人来说，在把玩了 Swift 几个小时之后，深深地喜欢上了这门新的语言。这篇文章以一个初学者（其实现在大家都是初学者）的角度来对 Swift 做一个简单的介绍，因为现在大家其实是在同一个起跑线上，所以理解上可能会有很多不精确的地方，出错了也请大家轻喷指正！</p>

<h2>什么是 Swift</h2>

<p>很多人在看到 Swift 第一眼的感觉是，这丫是个脚本语言啊。因为在很多语法特性上 Swift 确实和一些脚本非常相似。但是首先需要明确的是，至少在 Apple 开发中，Swift 不是以一种脚本语言来运行的，所有的 Swift 代码都将被 LLVM 编译为 native code，以极高的效率运行。按照官方今天给出的 benchmark 数据，运行时比 Python 快 3.9 倍，比 objc 快 1.4 倍左右。我相信官方数据肯定是有些水分，但是即使这样，Swift 也给人带来很多遐想和期待。Swift 和原来的 objc 一样，是类型安全的语言，变量和方法都有明确的返回，并且变量在使用前需要进行初始化。而在语法方面，Swift 迁移到了业界公认的非常先进的语法体系，其中包含了闭包，多返回，泛型和大量的函数式编程的理念，函数也终于成为一等公民可以作为变量保存了（虽然具体实现和用法上来看和 js 那种传统意义的好像不太一样）。初步看下来语法上借鉴了很多 Ruby 的人性化的设计，但是借助于 Apple 自己手中 强大的 LLVM，性能上必须要甩开 Ruby 不止一两个量级。</p>

<p>另一方面，Swift 的代码又是可以 Interactive 来“解释”执行的。新的 Xcode 中加入了所谓的 Playground 来对开发者输入的 Swift 代码进行交互式的相应，开发者也可是使用 swift 的命令行工具来交互式地执行 swift 语句。细心的朋友可能注意到了，我在这里把“解释”两个字打上了双引号。这是因为即使在命令行中， Swift 其实也不是被解释执行的，而是在每个指令后进对从开始以来的 swift 代码行了一遍编译，然后执行的。这样的做法下依然可以让人“感到”是在做交互解释执行，这门语言的编译速度和优化水平，可见一斑。同时 Playground 还顺便记录了每条语句的执行时候的各种情况，叫做一组 timeline。可以使用 timeline 对代码的执行逐步检查，省去了断点 debug 的时间，也非常方便。</p>

<p>至于更详细的比如 Swift 的语法之类的，可以参见 Apple 在 iBooks 放出的 <a href="https://itunes.apple.com/us/book/the-swift-programming-language/id881256329?mt=11">The Swift Programming Language</a>，或者你是开发者的话，也可以看看 pre-release 的<a href="https://developer.apple.com/library/ios/welcome_to_swift">参考文档</a></p>

<h2>Cool，我可以现在就使用 Swift 么？</h2>

<p>Swift 作为 Apple 钦定的 objc 的继承者，作为 iOS/Mac 开发者的话，是觉得必须和值得学习和使用的。现在 Swift 可以和原来的 objc 或者 c 系的代码混用（注意，不同于 objc 和 c++ 或者 c 在同一个 .mm 文件中的混编，swift 文件不能和 objc 代码写在同一个文件中，你需要将两种代码分开）。编译出来的二进制文件是可以运行在 iOS 7 和 iOS 8 的设备上的（iOS 6 及之前的是不支持的）。虽然我没有尝试过，但是使用新的 clang 对 swift 进行编译的 app 二进制包，只要你的 target 是 iOS 7 及以上的话，应该现在就可以往 App Store 进行提交。</p>

<p>一个很好的消息是 Xcode 6 中应该是所有的文档都有 objc 和 swift 两种语言版本了，所以在文档支持上应该不是问题。而按照 Apple 开发者社区的一贯的跟进速度，有理由相信在不久的将来，Apple 很可能会果断 drop 掉 objc 的支持，而全面转向 swift。所以，关于标题里的这个问题的答案，我个人的建议是，尽快学习，尽快开始使用。如果你有一定的脚本语言的基础（Ruby 最好，Python 或者 JS 什么的也很不错），又比较了解 Cocoa 框架的思想的话，转型到新的语言应该完全不是问题。你会发现以前很多 objc 实现起来很郁闷的事情，在新语言下都易如反掌。我毫不忌讳地说，在 Apple 无数工程师和语言设计天才的努力下，Swift 吸收了众多语言的精华，应该是现在这个世界上最新（这不是废话么），也是最先进的一门编程语言（之一）了。而我认为，也正是 Apple 对这门语言有这样的自信，才会在这么一个可以说公司还在全盛的时候，不守陈规、如此大胆地进行语言的更换。因为 Apple 必定比你我都精于算计，切换语言带来的利益必须远大于弊端，才会值得冒如此大的风险。在这个意义上来说，今天的发布会就是程序开发业界的一枚重磅炸弹，也必将写入史册，而你我其实真的身在其中，变成了这段历史的见证者。</p>

<h2>如何开始？</h2>

<p>很简单，虽然历年的 WWDC 都在 NDA 的控制之下使得我们无法讨论过多的内容，但是这次的 Swift 破天荒地是在 NDA 之外的内容。Apple 已经放出了足够多的资源让我们开始学习。首先是官方的 Swift 的<a href="https://developer.apple.com/swift/">介绍页面</a>，你可以了解一些 Swift 的基本特性和细节。然后就是从 iBooks 下载 <a href="https://itunes.apple.com/us/book/the-swift-programming-language/id881256329?mt=11">Swift 的书籍</a>。你可以不必通读全书，而只需要快速浏览一下 35 页之前的 Tour 部分的内容，就可以开始将其运用到开发中了。因为不受 NDA 限制，所以 StackOverflow 的 <a href="http://stackoverflow.com/questions/tagged/swift-language">swift 标签</a>和 <a href="https://www.google.com/#q=swift">Google 上</a>应该会马上充斥满相关的问题和内容。及时跟进，相信和其他开发者一同从零开始学习和进步，你会很快上手并熟练使用 Swift 进行开发。</p>

<p>（因为真的，太好用了。你很难想象我在写一个漂亮的闭包或者嵌套函数或者多返回时，那种内心的激动和喜悦...）</p>

<h2>总结</h2>

<p>这次的 WWDC 可以说是 Apple 之前几年布局的一个汇总和爆发。从一开始的 Mac 整合电话和短信，以及无处不在的 Handoff，到后面的通知中心 widget 和系统 framework 的 extension，以及更甚的 Family Share 等等，可以说 Apple 通过自己对产业链的控制和生态圈的完善，让 iDevice 或者 Mac 的用户粘度得到了前所未有的加强。对一个人来说，可能一台苹果设备之后他会很容易购买第二台第三台；对于一家人来说，可能一个成员拥有苹果设备之后，其他人也会被宣传和便捷带动。这是一手妙招，也是 Apple 最近几年一直在做的趋势。</p>

<p>罗马其实不是一天建成的，在开发语言方面，Apple 其实也精心打造了很多年。在语言而言，之前完全没有这方面经验的苹果，毅然决然地选择离开 GCC 阵营，另起炉灶自己弄 Clang 和 LLVM 的布局，而终于在几年来对 objc 小修小补之后来了一次革命性的爆发。在日进万金的大好时候，抛弃一个成熟开发社区，而转向一种新的编程语言，做出这种决策，只能说这家公司的魄力让人折服和钦佩。另一方面，Apple 这么做的另一个理由应该是吸引更多的开发者加入到 Apple 开发阵营，因为相对于 objc 的语法和学习曲线，Swift 显然要容易很多，对于其他阵营的开发者，这也会是一个很好的入场机会。正应了这次 WWDC 的宣传语，Apple 已经为我们提供了更好的工具，我们有什么理由不继续我们的征途，实现我们的梦想呢？</p>

<p><strong>Write the code. Change the world.</strong></p>

  </section>
</article>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- OneV's Den -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3324997515191619"
     data-ad-slot="9170309685"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<section class="read-more">
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">最近的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2014/06/walk-in-swift/" title="link to 行走于 Swift 的世界中">行走于 Swift 的世界中</a></h2>
       <p class="excerpt">2014 年 7 月 13 日更新：根据 beta 3 的情况修正了文中过时的部分从周一 Swift 正式公布，到现在周五，这几天其实基本一直在关注和摸索 Swift 了。对于一门新语言来说，开荒阶段的探索自然是激动人心的，但是很多时候资料的缺失和细节的隐藏也让人着实苦恼。这一周，特别是最近几天的感受是，Swift 并不像我上一篇表达自己初步看法的文章里所说的那样，相对于 objc 来说有更好的学习曲线。甚至可以说 objc 在除了语法上比较特别以外，其概念还是比较容易的。而 Swift ...&hellip;</p>
       <div class="post-list__meta"><time datetime="2014-06-07 17:23:44 +0800" class="post-list__meta--date date">2014-06-07</time> &#8226; <span class="post-list__meta--tags tags">能工巧匠集</span><a class="btn-border-small" href=/2014/06/walk-in-swift/>继续阅读</a></div>
   </div>
   
   
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">更早的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2014/05/jin-qi-sui-xiang-he-wwdc-de-ji-hua/" title="link to 近期随想和 WWDC 的计划">近期随想和 WWDC 的计划</a></h2>
       <p class="excerpt">最近的博文总是写技术，本来其实是打算将这里建设成技术成长与人文关怀并重的博客的，但是现在看来思考不足。在刚被每周七天每天 18 小时的魔鬼般的封闭开发连续虐待了三周之后，我基本达到了看一眼代码就想吐的地步。每天让我坚持下来的动力可能只剩 “过完这周就可以参加的 WWDC” 这一件事情了。于是觉得，现在是时候可以写一点技术无关的博文来舒缓舒缓心情了。其实在封闭开发期间发生了不少事情，整理在一起看来，还是颇为值得思考的。首先是经历了一件很不幸的事情，我的一个非常优秀的大学同学，也是家内从高中开...&hellip;</p>
       <div class="post-list__meta"><time datetime="2014-05-30 00:21:18 +0800" class="post-list__meta--date date">2014-05-30</time> &#8226; <span class="post-list__meta--tags tags">南箕北斗集</span><a class="btn-border-small" href=/2014/05/jin-qi-sui-xiang-he-wwdc-de-ji-hua/>继续阅读</a></div>
   </div>
   
</section>

<section class="post-comments">
  
    <div id="disqus_thread"></div>
    <script>
    
    var disqus_config = function () {
        this.page.url = "http://onevcat.com/2014/06/my-opinion-about-swift/";
        this.page.identifier = "/2014/06/my-opinion-about-swift/";
    };

    var disqus_shortname = 'onevcat';
    
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>要查看<a href="http://disqus.com/?ref_noscript"> Disqus </a>评论，请启用 JavaScript</noscript>
    
  
  
  
  
</section>


            <section class="footer">
    <footer>
    	<span class="footer__copyright">本站点采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享 署名-非商业性使用-相同方式共享 4.0 国际 许可协议</a></span>
        <span class="footer__copyright">由 <a href="https://jekyllrb.com">Jekyll</a> 于 2016-11-08 生成，感谢 <a href="https://www.digitalocean.com/?refcode=30ed2d146762">Digital Ocean</a> 为本站提供稳定的 VPS 服务</span>
        <span class="footer__copyright">本站由 <a href="http://onev.cat">@onevcat</a> 创建，采用 <a href="https://github.com/onevcat/vno-jekyll">Vno - Jekyll</a> 作为主题，您可以在 GitHub 找到<a href="https://github.com/onevcat/OneV-s-Den">本站源码</a> - &copy; 2016</span>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript" src="/js/main.js"></script>


<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-25719337-1', 'onevcat.com');
    ga('send', 'pageview');
</script>


    
  </body>

</html>
